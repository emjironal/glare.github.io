(this.webpackJsonpGLARE=this.webpackJsonpGLARE||[]).push([[0],{114:function(e,t,n){e.exports=n(203)},123:function(e,t,n){},131:function(e,t,n){},188:function(e,t,n){},196:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);var a=n(19),o=n.n(a),r=n(41),c=n(8),i=n(1),l=n.n(i),s=n(30),u=n.n(s),m=n(53),d=n(23),f=n(82),p=n.n(f);n(123);function h(){p.a.isEnabled&&p.a.request(),window.scrollTo(0,0),window.scrollTo(0,1),window.scrollTo(0,document.body.scrollHeight)}var g=function(){var e=Object(i.useContext)(_e).tourBasePath,t=Object(d.f)(),n=JSON.parse(localStorage.getItem("markerData"))||{project_name:"",intro_audio:""},a=n.project_name,o=n.intro_audio;return Object(i.useEffect)((function(){!function(){if("undefined"!==typeof window.screen.orientation){var e=window.screen.lockOrientation||window.ScreenOrientation||window.screen.msLockOrientation||window.screen.orientation.lock||null;e===window.ScreenOrientation?console.log("Firefox detected - lack of orientation support"):e.call(window.screen.orientation,"landscape")||console.warn("There was a problem in locking the orientation")}else console.warn("Screen Orientation not supported"),document.querySelector("html").classList.add("ios-cant-orient")}();var t=(JSON.parse(localStorage.getItem("markerData"))||{homepage_image:""}).homepage_image;return document.body.classList.add("homepage"),document.body.style.setProperty("--homepage-background","url(./../../"+e+t+")"),function(){return document.body.classList.remove("homepage")}}),[e]),l.a.createElement(l.a.Fragment,null,o&&l.a.createElement(m.Rehowl,{src:e+o},(function(e){var t=e.howl;return l.a.createElement(m.Play,{howl:t})})),l.a.createElement("div",{className:"homepage"},l.a.createElement("div",{id:"buttona"},l.a.createElement("button",{onClick:function(){h(),"undefined"!==typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission&&DeviceOrientationEvent.requestPermission().then((function(e){"granted"!==e&&alert("Motion access is required to view this site, Please delete your website cache in Settings -> Safari and reload.")})).catch(console.warn),t.push("intro")},type:"button"},"BEGIN TOUR")),l.a.createElement("div",{id:"introTxt"},a)))},b=n(207),v=n(208),E=n(209),y=n(210),O=n(32),k=n.n(O),j=n(103),w=n.n(j),S=n(26),C=n(22),N=n(18);S.b.add(N.h);var x={backBtn:{position:"fixed",left:".25em",bottom:".25em",zIndex:10}},I=function(e){var t=e.history,n=Object(i.useContext)(_e).toggleModel;return l.a.createElement("div",{id:"overlaybuttonback"},l.a.createElement(C.a,{className:"overlay-icon",alt:"back-arrow",color:"white",icon:N.h,onClick:function(){"/map"!==t.location.pathname&&n(!0),t.goBack()},style:x.backBtn}))},P=n(16),_=n(14),B=n(46),L=null;var M=function(e){var t=e.markerName,n=e.history;return l.a.createElement("div",null,l.a.createElement("p",{style:A.toastCtn},"It appears that you're at the ",t,".",l.a.createElement("button",{onClick:function(){return n.push("/tour?name=".concat(encodeURIComponent(t)))},style:A.toastBtn},"View Hotspot")))},R=function(e){var t=e.markerName,n=e.history;return l.a.createElement("div",null,l.a.createElement("p",{style:A.toastCtn},"It appears that you've left the ",t,".",l.a.createElement("button",{onClick:function(){return n.replace("/map")},style:A.toastBtn},"Go to Map")))},A={toastCtn:{display:"flex",fontSize:"1.1em",fontWeight:"bold"},toastBtn:{backgroundColor:"white",fontWeight:"bold"}};function D(e,t,n){!function(e,t,n){var a=n.filter((function(e){return H(e)})).map((function(t){var n=T(e.latitude,e.longitude,t.latitude,t.longitude);return Object(_.a)(Object(_.a)({},t),{},{dist:n})})).filter((function(e){return e.dist<.0076})).sort((function(e,t){return e.dist-t.dist})),o=0===a.length?null:a[0].name;L!==o&&(B.b.dismiss(),null!==o&&"/map"===t.location.pathname?Object(B.b)(l.a.createElement(M,{markerName:o,history:t}),{autoClose:!1,type:B.b.TYPE.INFO,draggablePercent:50}):null===o&&"/tour"===t.location.pathname&&Object(B.b)(l.a.createElement(R,{markerName:L,history:t}),{autoClose:!1,type:B.b.TYPE.INFO,draggablePercent:50}),L=o)}(e.coords,t,n)}function T(e,t,n,a){if(e===n&&t===a)return 0;var o=Math.PI*e/180,r=Math.PI*n/180,c=t-a,i=Math.PI*c/180,l=Math.sin(o)*Math.sin(r)+Math.cos(o)*Math.cos(r)*Math.cos(i);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515}function U(e,t){var n=t.map((function(t){return T(e.coords.latitude,e.coords.longitude,t.latitude,t.longitude)}));return Math.min.apply(Math,Object(P.a)(n))<=.1087359848}var H=function(e){return!e.isSubHotspot},J=function(e){return e.filter((function(e){return!H(e)}))},F=function(e){return e.filter((function(e){return H(e)}))},z=function(e,t,n){return J(t).filter((function(t){if(e&&n){var a=e.latitude,o=e.longitude;return a&&o&&Math.abs(T(a,o,t.latitude,t.longitude))<=.0076}return!1}))};n(131);var W=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=n||(t?"00af91":"add8e6");return new k.a.Icon({iconUrl:"https://chart.googleapis.com/chart?chst=d_map_spin&chld=.6|0|".concat(a,"|16|b|").concat(e),iconSize:[23,41]})},q=function(e){var t=Object(i.useState)([]),n=Object(c.a)(t,2),a=n[0],o=n[1],r=Object(i.useState)(null),s=Object(c.a)(r,2),u=s[0],m=s[1],d=Object(i.useContext)(_e),f=d.onCampus,p=d.setOnCampus,h=d.markerData,g=Object(i.useState)(null),O=Object(c.a)(g,2),k=O[0],j=O[1],S=18,C=[41.150121,-81.345059],N=Object(i.useCallback)((function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"}}}).catch((function(e){p(!1)})):p(!1)}),[p]),x=Object(i.useCallback)((function(e){u!==e&&(console.warn(e),m(e))}),[u]),P=Object(i.useCallback)((function(t){h.length>0&&D(t,e.history,h),p(U(t,h)),N(),m(null),o([t.coords.latitude,t.coords.longitude])}),[p,e.history,N,h]),_=Object(i.useCallback)((function(e){o([]),p(!1),x("Error: The Geolocation service failed.")}),[p,x]),B=Object(i.useCallback)((function(e){var t=e.target;if(k){var n=t.getBounds();k.fitBounds(n),k.options.center=n.getCenter(),k.options.maxBounds=n,k.options.minZoom=k.getZoom()}}),[k]);Object(i.useLayoutEffect)((function(){B({target:k}),navigator.geolocation?navigator.geolocation.watchPosition(P,_,{enableHighAccuracy:!0,timeout:1/0,maximumAge:0}):x("Error: Your browser doesn't support geolocation.")}),[P,_,x,f,k,B]);var L=f?F(h):h;return l.a.createElement(l.a.Fragment,null,l.a.createElement("link",{rel:"stylesheet",href:"//unpkg.com/leaflet@1.6.0/dist/leaflet.css"}),l.a.createElement(I,{history:e.history}),l.a.createElement(b.a,{center:C,zoom:S,currentPos:a,whenCreated:j},l.a.createElement(v.a,{maxNativeZoom:19,maxZoom:23,attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),h.length>0&&l.a.createElement(w.a,{showCoverageOnHover:!1,maxClusterRadius:12,eventHandlers:{add:function(e){B(e)}}},L.map((function(t){var n=t.position,a=t.latitude,o=t.longitude,r=t.name,c=t.pin_color,i=z(t,h,f).length>0;return l.a.createElement(E.a,{eventHandlers:{click:function(){e.history.push("/tour?name=".concat(encodeURIComponent(r)))}},key:n,zIndexOffset:-1,title:r,position:[a,o],icon:W(n.toString(),i,c)})}))),a.length>0&&!0===f&&l.a.createElement(y.a,{title:"Current Location",className:"userLocation",zIndexOffset:1e3,fillOpacity:1,color:"#2C8ECE",fillColor:"white",radius:7,center:a})))},G=n(9),Y=n(104),Z=n(65),V=n(98),$=l.a.memo((function(e){var t=e.source,n=e.name,a=e.onLoad,o=e.onPause,r=e.onPlaying,c=Object(i.useRef)(null),s=Object(i.useContext)(_e).modelOpen,u=1!==parseInt(localStorage.getItem(n+"-audio"))&&!s;return l.a.createElement("audio",{id:"audio-player",controls:!0,autoPlay:u,ref:c,onEnded:n?function(){localStorage.setItem(n+"-audio",1)}:function(){},onLoadedMetadata:a?function(){return a(Math.floor(1e3*document.querySelector("#audio-player").duration))}:function(){},onPause:o?function(){c.current.ended||o()}:function(){},onPlaying:r?function(){return r()}:function(){}},l.a.createElement("source",{id:"mp3_src",type:"audio/mp3",src:t}),"Your browser does not support the audio element.")})),K=n(85),Q=n.n(K),X=n(33),ee=n(47),te=n(211);n(188);Q.a.setAppElement("#root"),S.b.add(N.a,N.g,N.b);var ne=function(e){var t=e.visitedLibrary,n=e.HAS_LIBRARY_ITEMS,a=e.IS_GROUPED_HOTSPOT,o=Object(i.useState)(!1),r=Object(c.a)(o,2),s=r[0],u=r[1],m=l.a.useState(0),d=Object(c.a)(m,2),f=d[0],p=d[1],h=n&&!t,g=a,b=h||g,v=h&&g;return l.a.createElement(l.a.Fragment,null,b&&l.a.createElement(ee.Stack,null,l.a.createElement(ee.Frame,{width:"100px",height:"100px",top:15,right:-15,position:"fixed",style:oe.overlayBtnAlert,onTapStart:function(){u((function(e){return!e}))},className:"HotspotOverlay",onClick:function(){return p(1)},onAnimationEnd:function(){return p(0)},flash:f},l.a.createElement(C.a,{className:"overlay-ctn-notification",icon:N.b}),l.a.createElement(ee.Frame,{style:oe.overlayBtnAlert1,top:15,right:90,width:"350px"},l.a.createElement("div",{className:"hotspotdialog",style:{display:s?"block":"none"}},g&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Check out the other Hotspot Locations!"),l.a.createElement("p",null,"Make sure to check out the other hotspot locations in order to gain the full experience, along with their rich library content found under the menu bar.")),v&&l.a.createElement("hr",null),h&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Check out the Library!"),l.a.createElement("p",null,"including photos, audio, and content regarding each of the hotspot. The library option can be found under the Menu bar on the upper left hand corner of the screen.")))))))},ae=l.a.memo((function(e){var t=e.name,n=e.pages,a=void 0===n?[]:n,o=Object(i.useContext)(_e).toggleModel;return l.a.createElement("div",{className:"navigation-menu"},a.map((function(e,n){return l.a.createElement(X.c,{to:"".concat(".","/main?name=").concat(encodeURIComponent(t),"&type=").concat(encodeURIComponent(e.title)),onClick:function(){o(!1)},className:a.length===n+1?"menu-item-last":"menu-item",key:n},e.title)})))})),oe={overlayBtnAlert:{position:"fixed",backgroundColor:"none",zIndex:11},overlayBtnAlert1:{position:"fixed",backgroundColor:"none",zIndex:10},overlayBtn:{position:"fixed",left:".5em",top:".5em",zIndex:10},closeBtn:{position:"fixed",top:".5em",right:".5em"}},re=function(e){var t=e.children,n=e.data,a=Object(te.a)("VisitedLibrary"),o=Object(c.a)(a,2),r=o[0],s=o[1],u=Object(i.useContext)(_e),m=u.modelOpen,d=u.toggleModel,f=u.onCampus,p=n.media_pages,h=n.main_pages,g=n.name,b="undefined"!==typeof p&&p.length>0,v=H(n)&&f;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{isOpen:m,contentLabel:"Menu Content",className:"Modal",overlayClassName:"Overlay",closeTimeoutMS:250,"aria-expanded":m},l.a.createElement("div",{className:"menu-content"},l.a.createElement("p",{className:"menu-title"},"Menu"),l.a.createElement("div",{className:"menu-ctn"},l.a.createElement(ae,{name:g,pages:h}),l.a.createElement("div",{className:["media-menu",b?"library-full":"library-empty"].join(" ")},b&&l.a.createElement(X.c,{to:"".concat(".","/media?name=").concat(encodeURIComponent(g)),className:"menu-item",onClick:function(){s(!0)}},"Library"),l.a.createElement(X.c,{to:"".concat(".","/help"),className:"menu-item-last"},"Help")))),l.a.createElement("div",{style:oe.closeBtn},l.a.createElement(C.a,{className:["overlay-icon","closeBtn"].join(" "),icon:N.g,onClick:function(){return d(!1)}}))),l.a.createElement("div",{id:"overlay-content"},l.a.createElement("div",{style:oe.overlayBtn},l.a.createElement(C.a,{className:"overlay-icon",icon:N.a,onClick:function(){return d(!m)}})),t),l.a.createElement(ne,{visitedLibrary:r,HAS_LIBRARY_ITEMS:b,IS_GROUPED_HOTSPOT:v}))},ce=function(e){var t=e.isRotating,n=e.setIsRoating,a=Object(G.useThree)().camera;return Object(G.useFrame)((function(){t&&(a.position.set(0,0,1),n(!1))})),null},ie=n(87);n(196);S.b.add(N.f,N.e,N.d,N.c,N.b);var le=function(){return Object(Z.a)().active?l.a.createElement(V.a,{center:!0},l.a.createElement(Y.Ellipsis,{className:"spinner",color:"#fff"})):null},se=function(e){var t=e.baseName,n=e.data,a=e.handleData,o=e.markerData,r=e.onCampus,s=Object(i.useState)(0),u=Object(c.a)(s,2),m=u[0],d=u[1],f=F(o).filter((function(e){return e.name===t})).pop(),p=z(f,o,r),h=p.length>0&&0!==m,g=m<p.length,b=m>0,v=(h?p[m-1]:n).name,E=function(e){"next"===e&&g?d((function(e){var t=e+1;return a(p[e]),t})):"back"===e&&b&&d((function(e){var t=e-1;return a(h?p[t]:n),t}))};return l.a.createElement("div",{className:"hotspotControls"},p.length>0&&b&&l.a.createElement("div",{className:"control-left"},l.a.createElement(C.a,{className:"overlay-icon",icon:N.c,onClick:function(){E("back")}})),l.a.createElement("div",{onSelect:function(e){return e.preventDefault()},id:"title-ctn"},v),p.length>0&&g&&l.a.createElement("div",{className:"control-right"},l.a.createElement(C.a,{className:"overlay-icon",icon:N.d,onClick:function(){E("next")}})))},ue=function(e){var t=e.history,n=new URLSearchParams(Object(d.g)().search),a={name:"",start_audio:""},o=Object(i.useContext)(_e),r=o.onCampus,s=o.markerData,u=o.tourBasePath,m=Object(i.useState)(a),f=Object(c.a)(m,2),p=f[0],h=f[1],g=p.name,b=p.start_audio,v=Object(i.useState)(!1),E=Object(c.a)(v,2),y=E[0],O=E[1],k=Object(i.useRef)();return Object(i.useEffect)((function(){var e=n.get("name"),t=s.filter((function(t){return t.name===e})).pop();if("undefined"!==typeof t){var o=Object(_.a)(Object(_.a)({},a),t);JSON.stringify(p)!==JSON.stringify(o)&&h(o)}window.scrollTo(0,0),window.scrollTo(0,1),window.scrollTo(0,document.body.scrollHeight)}),[s,n,p,a]),l.a.createElement("div",{id:"container",style:{overflow:"hidden"}},l.a.createElement(re,{data:p},r&&l.a.createElement("video",{ref:k,autoPlay:!0,muted:!0,playsInline:!0,id:"videoElement"}),l.a.createElement(G.Canvas,{id:"canvas",camera:{position:[0,0,1],fov:45}},l.a.createElement("directionalLight",{position:[.5,0,.866]}),l.a.createElement(i.Suspense,{fallback:l.a.createElement(le,null)},r?l.a.createElement(ie.SphereMapAR,{data:p,video:k,tourBasePath:u}):l.a.createElement(ie.CubeMapVR,{data:p,tourBasePath:u}),l.a.createElement(ce,{isRotating:y,setIsRoating:O}))),l.a.createElement(se,{baseName:n.get("name"),handleData:h,data:p,markerData:s,onCampus:r}),l.a.createElement("div",{id:"fixed-footer"},l.a.createElement($,{name:g,source:u+b})),l.a.createElement("div",{className:"overlay-ctn-show"},l.a.createElement(C.a,{className:"overlay-icon",icon:N.e,onClick:function(){return O(!0)}})),l.a.createElement("div",{className:"overlay-ctn-map"},l.a.createElement(C.a,{className:"overlay-icon",icon:N.f,onClick:function(){return t.replace("/map")}}))))},me=n(54),de=n(50);n(197),n(198);function fe(e){var t=e.URL,n=e.description,a=e.index,o=e.tourBasePath;return l.a.createElement(de.e,{index:a},l.a.createElement("p",null,n),l.a.createElement("img",{src:o+t,alt:n}))}function pe(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:e.URL,alt:e.description},e.description))}S.b.add(N.c,N.d);var he=function(e){var t=new URLSearchParams(Object(d.g)().search),n=t.get("name"),a=t.get("type"),o=Object(i.useState)([]),r=Object(c.a)(o,2),s=r[0],u=r[1],m=Object(i.useContext)(_e),f=m.markerData,p=m.tourBasePath;return Object(i.useEffect)((function(){return document.body.classList.add("no-image"),function(){document.body.classList.remove("no-image")}})),Object(i.useEffect)((function(){var e=(f.filter((function(e){return e.name===n})).pop()||{media_pages:[]}).media_pages;JSON.stringify(e)!==JSON.stringify(s)&&u(e)}),[s,f,n]),l.a.createElement("main",null,l.a.createElement("h1",{className:"header"},"Library"),l.a.createElement(me.a,null,s.map((function(e){return null===a||a===e.title?l.a.createElement(me.b,{allowZeroExpanded:!0},l.a.createElement("div",{className:"text"},l.a.createElement(me.d,null,l.a.createElement(me.c,{id:"title"},e.title)),l.a.createElement(me.e,null,"Pictures"===e.title?l.a.createElement(de.c,{naturalSlideWidth:100,naturalSlideHeight:100,infinite:!0,totalSlides:e.content_items.length},l.a.createElement(de.f,null,e.content_items.map((function(e,t){return l.a.createElement(fe,{URL:e.item,description:e.item_description,index:t,tourBasePath:p})}))),l.a.createElement(de.d,null),l.a.createElement(de.a,null,l.a.createElement(C.a,{className:"back-icon",icon:N.c})),l.a.createElement(de.b,null,l.a.createElement(C.a,{className:"next-icon",icon:N.d}))):e.content_items.map((function(e){return l.a.createElement(pe,{URL:e.item,description:e.item_description})}))))):null}))),l.a.createElement(I,{history:e.history}))};n(199);S.b.add(N.g);var ge=function(e){var t=e.history,n=new URLSearchParams(Object(d.g)().search),a=n.get("name"),o=n.get("type"),r=Object(i.useState)([]),s=Object(c.a)(r,2),u=s[0],m=s[1],f=Object(i.useState)(0),p=Object(c.a)(f,2),h=p[0],g=p[1],b=Object(i.useState)(!1),v=Object(c.a)(b,2),E=v[0],y=v[1],O=Object(i.useContext)(_e),k=O.markerData,j=O.tourBasePath,w=Object(ee.useAnimation)(),S=function(e){w.start({opacity:0,transition:{duration:e/1e3}}).then((function(){return y(!0)}))},x=function(){S(1.3*h)},P=function(){w.stop()};return Object(i.useEffect)((function(){return document.body.classList.add("scrollable-body"),function(){document.body.attributes.removeNamedItem("style"),document.body.classList.remove("scrollable-body")}}),[]),Object(i.useEffect)((function(){var e=(k.filter((function(e){return e.name===a})).pop()||{main_pages:[]}).main_pages;JSON.stringify(e)!==JSON.stringify(u)&&m(e)}),[u,k,a]),l.a.createElement(l.a.Fragment,null,u.map((function(e,n){return o===e.title?(document.body.style.backgroundImage="url("+j+e.background_image+")",l.a.createElement("main",{key:n},l.a.createElement(C.a,{className:["overlay-icon","closeBtn",E?"hidden":"visible"].join(" "),icon:N.g,onClick:function(){S(200)}}),l.a.createElement(ee.Frame,{position:"relative",animate:w,className:["textCtn",E?"hidden":"visible"].join(" "),initial:{opacity:1,width:"calc(100% - 16em)"},exit:{opacity:0}},l.a.createElement("h1",{id:"title"},e.title),l.a.createElement("p",{id:"text"},e.description)),l.a.createElement($,{source:j+e.descriptive_audio,onLoad:function(e){return g(e)},onPause:P,onPlaying:x}),l.a.createElement(I,{history:t}))):null})))};n(200);S.b.add(N.a,N.f,N.e);var be=[{description:"Turn the volume up on your device.",image:"Step1.png"},{description:"Use the map to navigate to each hotspot. If the map does not come up automatically, you can get there by clicking the [icon] icon.",icon:l.a.createElement(C.a,{color:"white",icon:N.f}),image:"Step2.png"},{description:"After arriving at the hotspot locate the foot-guide on the ground and point your camera in the direction indicated.",image:"Step3.png"},{description:"After pointing your camera in  the instructed direction, click on the [icon] icon to generate augmented images on the screen, and listen for the audio clip.",icon:l.a.createElement(C.a,{color:"white",icon:N.e}),image:"Step4.png"},{description:"After each hotspot you can find more information unique to that location by clicking on the [icon] icon and viewing each menu item.",icon:l.a.createElement(C.a,{color:"white",icon:N.a}),image:"Step5.png"}],ve=[be[0],{description:"Click on each hotspot [icon] on the map to access augmented reality images and information about the site.",icon:l.a.createElement(C.a,{color:"white",icon:N.f}),image:"Step2-remote.png"},{description:"Each hotspot shows an historical image, displayed on a 360 image from today. You can use your mouse to look around the picture. Use the various icons to access additional information or to return to the map.",image:"Step3-remote.png"}],Ee=function(e){var t=e.description,n=e.icon,a=e.index,o=/(\[icon\])/g,r=t.match(o);return l.a.createElement("li",{key:a},t.split(o).reduce((function(e,t){return n?r.includes(t)?[l.a.createElement(l.a.Fragment,null,e,n)]:[].concat(Object(P.a)(e),[t]):e})))},ye=function(){return(Object(i.useContext)(_e).onCampus?be:ve).map((function(e,t){return l.a.createElement(Ee,Object.assign({},e,{index:t,key:t}))}))},Oe=function(){var e=Object(d.f)(),t=Object(i.useState)(0),n=Object(c.a)(t,2),a=n[0],o=n[1],r=parseInt(localStorage.getItem("introCount")),s=Object(i.useContext)(_e),u=s.onCampus,f=s.setOnCampus,p=Object(i.useState)([]),h=Object(c.a)(p,2),g=h[0],b=h[1],v=u?"_inSitu":"_remote",E=Object(m.useHowl)({src:"./audio/intro/"+(a+1)+v+".m4a",html5:!0}).howl,y=Object(i.useCallback)((function(){localStorage.setItem("introCount",g.length),e.replace("/map")}),[g.length,e]),O=Object(i.useCallback)((function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"}}}).catch((function(e){f(!1)})):f(!1)}),[f]),k=Object(i.useCallback)((function(){navigator.geolocation?navigator.geolocation.watchPosition((function(){return f(!0)}),(function(){return f(!1)}),{enableHighAccuracy:!0,timeout:1/0,maximumAge:0}):f(!1)}),[f]);return Object(i.useEffect)((function(){return document.body.classList.add("IntroPage"),document.body.style.setProperty("--intro-background","url(./../../images/intro/Background_Tile.png)"),k(),O(),b(u?be:ve),r>0&&g.length>0&&(r>=g.length?y():o(r)),function(){return document.body.classList.remove("IntroPage")}}),[g,u,r,O,k,y]),g.length>0&&g.length>a?l.a.createElement("div",{className:"intro"},l.a.createElement(m.Play,{howl:E}),l.a.createElement("h1",{className:"title"},"Step ",a+1),g.length-1>a&&l.a.createElement("p",{className:"skipBtn",onClick:y},"skip"),l.a.createElement("div",{className:"content"},l.a.createElement("img",{className:"icons",alt:"icon",src:"./images/intro/"+g[a].image}),l.a.createElement("p",{className:"description"},function(e){var t=/(\[icon\])/g,n=e.split(t),o=e.match(t);return n.reduce((function(e,t){return t?o.includes(t)?[].concat(Object(P.a)(e),[g[a].icon]):[].concat(Object(P.a)(e),[t]):e}))}(g[a].description))),l.a.createElement("button",{onClick:function(){if(a>0){var t=a-1;o(t),localStorage.setItem("introCount",t)}else e.push("/")},className:"btn-back"},"Back"),l.a.createElement("button",{onClick:function(){var e=a+1;g.length-1>a?(o(e),localStorage.setItem("introCount",e)):y()},className:"btn-next"},g.length-1>a?"Next":"Begin Tour")):l.a.createElement(l.a.Fragment,null,"Loading...")};var ke=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"404 Not found"),l.a.createElement(X.b,{to:"/"},l.a.createElement("p",null,"Please considering going back to the homepage.")))};n(201);S.b.add(N.g);var je=function(e){var t=e.history,n=Object(i.useContext)(_e);return n.onCampus,n.setOnCampus,Object(i.useEffect)((function(){return document.body.classList.add("help-body"),function(){document.body.classList.remove("help-body")}}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"title"},"Help"),l.a.createElement("h2",{className:"subtitle"},"How to Use the Augmented Reality Tour"),l.a.createElement("ol",{className:"rules",type:"1"},l.a.createElement(ye,null)),!1,l.a.createElement(C.a,{className:["overlay-icon","closeBtn"].join(" "),icon:N.g,onClick:function(){return t.goBack()}}))},we=n(73),Se=(JSON.parse(localStorage.getItem("markerData"))||{ga_tracking_id:""}).ga_tracking_id;Se&&we.a.initialize(Se);var Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{debug:!0},n=function(e){we.a.set(Object(_.a)({page:e},t)),we.a.pageview(e)},a=function(t){return Object(i.useEffect)((function(){return n(t.location.pathname)}),[t.location.pathname]),l.a.createElement(e,t)};return a};var Ne=function(){return l.a.createElement("main",null,l.a.createElement(d.c,null,l.a.createElement(d.a,{path:"/",component:Ce(g),exact:!0}),l.a.createElement(d.a,{path:"/map",component:Ce(q),exact:!0}),l.a.createElement(d.a,{path:"/tour",component:Ce(ue),exact:!0}),l.a.createElement(d.a,{path:"/media",component:Ce(he),exact:!0}),l.a.createElement(d.a,{path:"/main",component:Ce(ge),exact:!0}),l.a.createElement(d.a,{path:"/help",component:Ce(je),exact:!0}),l.a.createElement(d.a,{path:"/intro",component:Ce(Oe),exact:!0}),l.a.createElement(d.a,{component:ke})))},xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ie(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(202);var Pe=n(212);n.d(t,"Context",(function(){return _e}));var _e=l.a.createContext();function Be(e){var t=e.children,n=Object(i.useState)(!1),a=Object(c.a)(n,2),s=a[0],u=a[1],m=Object(i.useState)(!1),f=Object(c.a)(m,2),p=f[0],h=f[1],g=Object(d.g)(),b=Object(i.useState)(null),v=Object(c.a)(b,2),E=v[0],y=v[1],O=Object(i.useState)([]),k=Object(c.a)(O,2),j=k[0],w=k[1],S=(JSON.parse(localStorage.getItem("markerData"))||{project_name:""}).project_name;Object(Pe.a)(S);var C=Object(i.useCallback)(function(){var e=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z0-9]+$/,""!==(n=null===t?"":t)&&!a.test(n)){e.next=7;break}return e.next=5,fetch("."+n+"/markers.json").then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("hotspots")&&(JSON.stringify(t)!==JSON.stringify(localStorage.getItem("tourBasePath"))&&localStorage.setItem("tourBasePath",JSON.stringify(t)),JSON.stringify(e.hotspots)!==JSON.stringify(j)&&w(e.hotspots),localStorage.getItem("markerData")!==JSON.stringify(e)&&(localStorage.setItem("markerData",JSON.stringify(e)),window.location.reload()))})).catch((function(e){return console.error("[Error]: "+e)}));case 5:e.next=8;break;case 7:console.error("[Error]: Path traveral attempted, could not get marker data");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j]);return Object(i.useEffect)((function(){var e=new URLSearchParams(g.search).get("tour");if(E!==e&&"/"===g.pathname&&y(e),"/"===g.pathname)C(e);else if(0===j.length&&null!==localStorage.getItem("markerData")){var t=JSON.parse(localStorage.getItem("tourBasePath"));y(t),C(t)}}),[g,E,j,C]),l.a.createElement(_e.Provider,{value:{onCampus:s,setOnCampus:function(e){e!==s&&u(e)},modelOpen:p,toggleModel:function(e){return h(e)},markerData:j,tourBasePath:null===E?"":E+"/"}},t,l.a.createElement(B.a,null))}u.a.render(l.a.createElement(X.a,{basename:window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/"))},l.a.createElement(Be,null,l.a.createElement(Ne,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");xe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ie(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ie(t,e)}))}}()}},[[114,1,2]]]);
//# sourceMappingURL=main.a5286a14.chunk.js.map
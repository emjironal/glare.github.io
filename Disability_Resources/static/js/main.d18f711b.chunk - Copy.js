(this.webpackJsonpGLARE=this.webpackJsonpGLARE||[]).push([[0],{106:function(e,t,a){},115:function(e,t,a){},172:function(e,t,a){},176:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},183:function(e,t,a){"use strict";a.r(t);var n=a(32),o=a.n(n),r=a(57),c=a(12),i=a(0),l=a.n(i),s=a(26),u=a.n(s),m=a(47),d=a(19),f=a(73),p=a.n(f);a(106);function g(){p.a.isEnabled&&p.a.request(),window.scrollTo(0,0),window.scrollTo(0,1),window.scrollTo(0,document.body.scrollHeight)}var h=function(){var e=Object(i.useContext)(Je).tourBasePath,t=Object(d.f)(),a=JSON.parse(localStorage.getItem("markerData"))||{project_name:"",intro_audio:""},n=a.project_name,o=a.intro_audio;return Object(i.useEffect)((function(){!function(){if("undefined"!==typeof window.screen.orientation){var e=window.screen.lockOrientation||window.ScreenOrientation||window.screen.msLockOrientation||window.screen.orientation.lock||null;e===window.ScreenOrientation?console.log("Firefox detected - lack of orientation support"):e.call(window.screen.orientation,"landscape")||console.warn("There was a problem in locking the orientation")}else console.warn("Screen Orientation not supported"),document.querySelector("html").classList.add("ios-cant-orient")}();var t=(JSON.parse(localStorage.getItem("markerData"))||{homepage_image:""}).homepage_image;return document.body.classList.add("homepage"),document.body.style.setProperty("--homepage-background","url(./../../"+e+t+")"),function(){return document.body.classList.remove("homepage")}}),[e]),l.a.createElement(l.a.Fragment,null,o&&l.a.createElement(m.Rehowl,{src:e+o},(function(e){var t=e.howl;return l.a.createElement(m.Play,{howl:t})})),l.a.createElement("div",{className:"homepage"},l.a.createElement("div",{id:"buttona"},l.a.createElement("button",{onClick:function(){g(),"undefined"!==typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission&&DeviceOrientationEvent.requestPermission().then((function(e){"granted"!==e&&alert("Motion access is required to view this site, Please delete your website cache in Settings -> Safari and reload.")})).catch(console.warn),t.push("intro")},type:"button"},"BEGIN TOUR")),l.a.createElement("div",{id:"introTxt"},n)))},v=a(187),b=a(188),E=a(189),y=a(190),O=a(191),j=a(25),w=a.n(j),k=a(89),S=a.n(k),C=a(23),x=a(17),N=a(14);C.b.add(N.h);var P={backBtn:{position:"fixed",left:".25em",bottom:".25em",zIndex:10}},_=function(e){var t=e.history,a=Object(i.useContext)(Je).toggleModel;return l.a.createElement("div",{id:"overlaybuttonback"},l.a.createElement(x.a,{className:"overlay-icon",alt:"back-arrow",color:"white",icon:N.h,onClick:function(){"/map"!==t.location.pathname&&a(!0),t.goBack()},style:P.backBtn}))},I=a(18),M=a(10),B=a(40),L=null;var R=function(e){var t=e.markerName,a=e.history;return l.a.createElement("div",null,l.a.createElement("p",{style:U.toastCtn},"It appears that you're at the ",t,".",l.a.createElement("button",{onClick:function(){return a.push("/tour?name=".concat(encodeURIComponent(t)))},style:U.toastBtn},"View Hotspot")))},D=function(e){var t=e.markerName,a=e.history;return l.a.createElement("div",null,l.a.createElement("p",{style:U.toastCtn},"It appears that you've left the ",t,".",l.a.createElement("button",{onClick:function(){return a.replace("/map")},style:U.toastBtn},"Go to Map")))},U={toastCtn:{display:"flex",fontSize:"1.1em",fontWeight:"bold"},toastBtn:{backgroundColor:"white",fontWeight:"bold"}};function T(e,t,a){!function(e,t,a){var n=a.filter((function(e){return H(e)})).map((function(t){var a=A(e.latitude,e.longitude,t.latitude,t.longitude);return Object(M.a)(Object(M.a)({},t),{},{dist:a})})).filter((function(e){return e.dist<.0076})).sort((function(e,t){return e.dist-t.dist})),o=0===n.length?null:n[0].name;L!==o&&(B.b.dismiss(),null!==o&&"/map"===t.location.pathname?Object(B.b)(l.a.createElement(R,{markerName:o,history:t}),{autoClose:!1,type:B.b.TYPE.INFO,draggablePercent:50}):null===o&&"/tour"===t.location.pathname&&Object(B.b)(l.a.createElement(D,{markerName:L,history:t}),{autoClose:!1,type:B.b.TYPE.INFO,draggablePercent:50}),L=o)}(e.coords,t,a)}function A(e,t,a,n){if(e===a&&t===n)return 0;var o=Math.PI*e/180,r=Math.PI*a/180,c=t-n,i=Math.PI*c/180,l=Math.sin(o)*Math.sin(r)+Math.cos(o)*Math.cos(r)*Math.cos(i);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515}function F(e,t){var a=t.map((function(t){return A(e.coords.latitude,e.coords.longitude,t.latitude,t.longitude)}));return Math.min.apply(Math,Object(I.a)(a))<=.1087359848}var H=function(e){return!e.isSubHotspot},J=function(e){return e.filter((function(e){return!H(e)}))},z=function(e){return e.filter((function(e){return H(e)}))},W=function(e,t,a){return J(t).filter((function(t){if(e&&a){var n=e.latitude,o=e.longitude;return n&&o&&Math.abs(A(n,o,t.latitude,t.longitude))<=.0076}return!1}))};a(115);var G=function(e){var t=e.markerData,a=e.onCampus,n=e.history,o=Object(y.a)(),r=Object(i.useCallback)((function(e){var t=e.target.getBounds();o.fitBounds(t),o.options.center=t.getCenter(),o.options.maxBounds=t,o.options.minZoom=o.getZoom()}),[o]),c=a?z(t):t;return l.a.createElement(l.a.Fragment,null,t.length>0&&l.a.createElement(S.a,{showCoverageOnHover:!1,maxClusterRadius:12,eventHandlers:{add:function(e){r(e)}}},c.map((function(e){var o=e.position,r=e.latitude,c=e.longitude,i=e.name,s=e.pin_color,u=W(e,t,a).length>0;return l.a.createElement(O.a,{eventHandlers:{click:function(){n.push("/tour?name=".concat(encodeURIComponent(i)))}},key:o,zIndexOffset:-1,title:i,position:[r,c],icon:q(o.toString(),u,s)})}))))},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=a||(t?"00af91":"add8e6");return new w.a.Icon({iconUrl:"https://chart.googleapis.com/chart?chst=d_map_spin&chld=.6|0|".concat(n,"|16|b|").concat(e),iconSize:[23,41]})},Y=function(e){var t=Object(i.useState)([]),a=Object(c.a)(t,2),n=a[0],o=a[1],r=Object(i.useState)(null),s=Object(c.a)(r,2),u=s[0],m=s[1],d=Object(i.useContext)(Je),f=d.onCampus,p=d.setOnCampus,g=d.markerData,h=18,y=[41.150121,-81.345059],O=Object(i.useCallback)((function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"}}}).catch((function(e){p(!1)})):p(!1)}),[p]),j=Object(i.useCallback)((function(e){u!==e&&(console.warn(e),m(e))}),[u]),w=Object(i.useCallback)((function(t){g.length>0&&T(t,e.history,g),p(F(t,g)),O(),m(null),o([t.coords.latitude,t.coords.longitude])}),[p,e.history,O,g]),k=Object(i.useCallback)((function(e){o([]),p(!1),j("Error: The Geolocation service failed.")}),[p,j]);return Object(i.useLayoutEffect)((function(){navigator.geolocation?navigator.geolocation.watchPosition(w,k,{enableHighAccuracy:!0,timeout:1/0,maximumAge:0}):j("Error: Your browser doesn't support geolocation.")}),[w,k,j,f]),l.a.createElement(l.a.Fragment,null,l.a.createElement("link",{rel:"stylesheet",href:"//unpkg.com/leaflet@1.6.0/dist/leaflet.css"}),l.a.createElement(_,{history:e.history}),l.a.createElement(v.a,{center:y,zoom:h,currentPos:n},l.a.createElement(b.a,{maxNativeZoom:19,maxZoom:23,attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),l.a.createElement(G,{markerData:g,restrictedMarkersonCampus:f,history:e.history}),n.length>0&&!0===f&&l.a.createElement(E.a,{title:"Current Location",className:"userLocation",zIndexOffset:1e3,fillOpacity:1,color:"#2C8ECE",fillColor:"white",radius:7,center:n})))},Z=a(16),V=a(90),$=a(193),K=a(194),Q=l.a.memo((function(e){var t=e.source,a=e.name,n=e.onLoad,o=e.onPause,r=e.onPlaying,c=Object(i.useRef)(null),s=Object(i.useContext)(Je).modelOpen,u=1!==parseInt(localStorage.getItem(a+"-audio"))&&!s;return l.a.createElement("audio",{id:"audio-player",controls:!0,autoPlay:u,ref:c,onEnded:a?function(){localStorage.setItem(a+"-audio",1)}:function(){},onLoadedMetadata:n?function(){return n(Math.floor(1e3*document.querySelector("#audio-player").duration))}:function(){},onPause:o?function(){c.current.ended||o()}:function(){},onPlaying:r?function(){return r()}:function(){}},l.a.createElement("source",{id:"mp3_src",type:"audio/mp3",src:t}),"Your browser does not support the audio element.")})),X=a(76),ee=a.n(X),te=a(28),ae=a(42),ne=a(192);a(172);ee.a.setAppElement("#root"),C.b.add(N.a,N.g,N.b);var oe=function(e){var t=e.visitedLibrary,a=e.HAS_LIBRARY_ITEMS,n=e.IS_GROUPED_HOTSPOT,o=Object(i.useState)(!1),r=Object(c.a)(o,2),s=r[0],u=r[1],m=l.a.useState(0),d=Object(c.a)(m,2),f=d[0],p=d[1],g=a&&!t,h=n,v=g||h,b=g&&h;return l.a.createElement(l.a.Fragment,null,v&&l.a.createElement(ae.Stack,null,l.a.createElement(ae.Frame,{width:"100px",height:"100px",top:15,right:-15,position:"fixed",style:ce.overlayBtnAlert,onTapStart:function(){u((function(e){return!e}))},className:"HotspotOverlay",onClick:function(){return p(1)},onAnimationEnd:function(){return p(0)},flash:f},l.a.createElement(x.a,{className:"overlay-ctn-notification",icon:N.b}),l.a.createElement(ae.Frame,{style:ce.overlayBtnAlert1,top:15,right:90,width:"350px"},l.a.createElement("div",{className:"hotspotdialog",style:{display:s?"block":"none"}},h&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Check out the other Hotspot Locations!"),l.a.createElement("p",null,"Make sure to check out the other hotspot locations in order to gain the full experience, along with their rich library content found under the menu bar.")),b&&l.a.createElement("hr",null),g&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Check out the Library!"),l.a.createElement("p",null,"including photos, audio, and content regarding each of the hotspot. The library option can be found under the Menu bar on the upper left hand corner of the screen.")))))))},re=l.a.memo((function(e){var t=e.name,a=e.pages,n=void 0===a?[]:a,o=Object(i.useContext)(Je).toggleModel;return l.a.createElement("div",{className:"navigation-menu"},n.map((function(e,a){return l.a.createElement(te.c,{to:"".concat(".","/main?name=").concat(encodeURIComponent(t),"&type=").concat(encodeURIComponent(e.title)),onClick:function(){o(!1)},className:n.length===a+1?"menu-item-last":"menu-item",key:a},e.title)})))})),ce={overlayBtnAlert:{position:"fixed",backgroundColor:"none",zIndex:11},overlayBtnAlert1:{position:"fixed",backgroundColor:"none",zIndex:10},overlayBtn:{position:"fixed",left:".5em",top:".5em",zIndex:10},closeBtn:{position:"fixed",top:".5em",right:".5em"}},ie=function(e){var t=e.children,a=e.data,n=Object(ne.a)("VisitedLibrary"),o=Object(c.a)(n,2),r=o[0],s=o[1],u=Object(i.useContext)(Je),m=u.modelOpen,d=u.toggleModel,f=u.onCampus,p=a.media_pages,g=a.main_pages,h=a.name,v="undefined"!==typeof p&&p.length>0,b=H(a)&&f;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ee.a,{isOpen:m,contentLabel:"Menu Content",className:"Modal",overlayClassName:"Overlay",closeTimeoutMS:250,"aria-expanded":m},l.a.createElement("div",{className:"menu-content"},l.a.createElement("p",{className:"menu-title"},"Menu"),l.a.createElement("div",{className:"menu-ctn"},l.a.createElement(re,{name:h,pages:g}),l.a.createElement("div",{className:["media-menu",v?"library-full":"library-empty"].join(" ")},v&&l.a.createElement(te.c,{to:"".concat(".","/media?name=").concat(encodeURIComponent(h)),className:"menu-item",onClick:function(){s(!0)}},"Library"),l.a.createElement(te.c,{to:"".concat(".","/help"),className:"menu-item-last"},"Help")))),l.a.createElement("div",{style:ce.closeBtn},l.a.createElement(x.a,{className:["overlay-icon","closeBtn"].join(" "),icon:N.g,onClick:function(){return d(!1)}}))),l.a.createElement("div",{id:"overlay-content"},l.a.createElement("div",{style:ce.overlayBtn},l.a.createElement(x.a,{className:"overlay-icon",icon:N.a,onClick:function(){return d(!m)}})),t),l.a.createElement(oe,{visitedLibrary:r,HAS_LIBRARY_ITEMS:v,IS_GROUPED_HOTSPOT:b}))},le=function(e){var t=e.isRotating,a=e.setIsRoating,n=Object(Z.d)().camera;return Object(Z.b)((function(){t&&(n.position.set(0,0,1),a(!1))})),null},se=(a(176),a(197)),ue=a(196),me=a(198),de=a(2);C.b.add(N.f,N.e,N.d,N.c,N.b);var fe=function(e){var t=e.tourBasePath,a=e.overlay,n=Object(Z.c)(de.TextureLoader,t+a);return l.a.createElement(l.a.Fragment,null,n&&l.a.createElement("group",{dispose:null},l.a.createElement("mesh",null,l.a.createElement("sprite",{scale:[.5,.5]},l.a.createElement("spriteMaterial",{attach:"material",map:n})))))},pe=l.a.memo((function(e){var t=e.data,a=e.video,n=e.tourBasePath,o=t.overlay,r=t.virtual_object;return Object(i.useEffect)((function(){!function(e){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(a,n){t.call(navigator,e,a,n)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"}}}).then((function(t){t?("srcObject"in e.current?e.current.srcObject=t:e.current.src=window.URL.createObjectURL(t),e.current.onloadedmetadata=function(t){e.current.play()}):console.warn("Missing auto stream")})).catch((function(e){console.warn(e)}))}(a)}),[a]),l.a.createElement(l.a.Fragment,null,!!o&&l.a.createElement(fe,{overlay:o,tourBasePath:n}),!!r&&l.a.createElement(ge,{virtual_object:r,tourBasePath:n}),l.a.createElement(se.a,null))})),ge=function(e){var t=e.tourBasePath,a=e.virtual_object,n=Object(ue.a)(t+a,!0),o=n.nodes,r=n.materials;return l.a.createElement("group",{dispose:null,position:[0,0,-5]},l.a.createElement("mesh",{material:r["Material.001"],geometry:o.Scene.children[0].geometry}))},he=function(e){var t=e.data,a=e.tourBasePath,n=t.overlay_size,o=void 0===n?10:n,r=t.overlay_offset_x,c=void 0===r?0:r,i=t.overlay_offset_y,s=void 0===i?0:i,u=t.overlay,m=Object(Z.c)(de.TextureLoader,a+u);return l.a.createElement("mesh",{position:[c,s,-9]},l.a.createElement("planeGeometry",{attach:"geometry",args:[o,o]}),l.a.createElement("meshBasicMaterial",{attach:"material",map:m,side:de.FrontSide}))},ve=function(e){var t=e.panorama_image,a=e.tourBasePath,n=Object(Z.c)(de.TextureLoader,a+t),o="\n    uniform sampler2D map;\n    uniform vec3 placement;\n    varying vec3 worldPosition;\n    const float seamWidth = 0.01;\n    void main () {\n      vec3 R = worldPosition - placement;\n      float r = length (R);\n      float c = -R.y / r;\n      float theta = acos (c);\n      float phi = atan (R.x, -R.z);\n      float seam = \n        max (0.0, 1.0 - abs (R.x / r) / seamWidth) *\n        clamp (1.0 + (R.z / r) / seamWidth, 0.0, 1.0);\n      gl_FragColor = texture2D (map, vec2 (\n        0.5 + phi / ".concat(2*Math.PI,",\n        theta / ").concat(Math.PI,"\n      ), -2.0 * log2(1.0 + c * c) -12.3 * seam);\n    }"),r={map:{type:"t",value:n},placement:{type:"v3",value:new de.Vector3}};return l.a.createElement("mesh",null,l.a.createElement("boxGeometry",{attach:"geometry",args:[20,20,-20]}),l.a.createElement("shaderMaterial",{attach:"material",uniforms:r,fragmentShader:o,vertexShader:"\n    varying vec3 worldPosition;\n    void main () {\n      vec4 p = vec4 (position, 1.0);\n      worldPosition = (modelMatrix * p).xyz;\n      gl_Position = projectionMatrix * modelViewMatrix * p;\n    }"}))},be=l.a.memo((function(e){var t=e.data,a=e.tourBasePath,n=t.panorama_image,o=t.overlay,r=t.virtual_object;return l.a.createElement(l.a.Fragment,null,l.a.createElement("group",{dispose:null},!!n&&l.a.createElement(ve,{panorama_image:n,tourBasePath:a}),!!o&&l.a.createElement(he,{data:t,tourBasePath:a})),!!r&&l.a.createElement(ge,{virtual_object:r,tourBasePath:a}),l.a.createElement(me.a,{enablePan:!1,enableDamping:!0,minDistance:1,maxDistance:3}))})),Ee=function(){return Object($.a)().active?l.a.createElement(K.a,{center:!0},l.a.createElement(V.Ellipsis,{className:"spinner",color:"#fff"})):null},ye=function(e){var t=e.baseName,a=e.data,n=e.handleData,o=e.markerData,r=e.onCampus,s=Object(i.useState)(0),u=Object(c.a)(s,2),m=u[0],d=u[1],f=z(o).filter((function(e){return e.name===t})).pop(),p=W(f,o,r),g=p.length>0&&0!==m,h=m<p.length,v=m>0,b=(g?p[m-1]:a).name,E=function(e){"next"===e&&h?d((function(e){var t=e+1;return n(p[e]),t})):"back"===e&&v&&d((function(e){var t=e-1;return n(g?p[t]:a),t}))};return l.a.createElement("div",{className:"hotspotControls"},p.length>0&&v&&l.a.createElement("div",{className:"control-left"},l.a.createElement(x.a,{className:"overlay-icon",icon:N.c,onClick:function(){E("back")}})),l.a.createElement("div",{onSelect:function(e){return e.preventDefault()},id:"title-ctn"},b),p.length>0&&h&&l.a.createElement("div",{className:"control-right"},l.a.createElement(x.a,{className:"overlay-icon",icon:N.d,onClick:function(){E("next")}})))},Oe=function(e){var t=e.history,a=new URLSearchParams(Object(d.g)().search),n={name:"",start_audio:""},o=Object(i.useContext)(Je),r=o.onCampus,s=o.markerData,u=o.tourBasePath,m=Object(i.useState)(n),f=Object(c.a)(m,2),p=f[0],g=f[1],h=p.name,v=p.start_audio,b=Object(i.useState)(!1),E=Object(c.a)(b,2),y=E[0],O=E[1],j=Object(i.useRef)();var w="undefined"!==typeof window;return Object(i.useEffect)((function(){var e=a.get("name"),t=s.filter((function(t){return t.name===e})).pop();if("undefined"!==typeof t){var o=Object(M.a)(Object(M.a)({},n),t);JSON.stringify(p)!==JSON.stringify(o)&&g(o)}w&&(window.scrollTo(0,0),window.scrollTo(0,1),window.scrollTo(0,document.body.scrollHeight))}),[s,a,p,n,w]),l.a.createElement("div",{id:"container",style:{overflow:"hidden"}},l.a.createElement(ie,{data:p},r&&l.a.createElement("video",{ref:j,autoPlay:!0,muted:!0,playsInline:!0,id:"videoElement"}),l.a.createElement(Z.a,{id:"canvas",camera:{position:[0,0,1],fov:45}},l.a.createElement("directionalLight",{position:[.5,0,.866]}),l.a.createElement(i.Suspense,{fallback:l.a.createElement(Ee,null)},r?l.a.createElement(pe,{data:p,video:j,tourBasePath:u}):l.a.createElement(be,{data:p,tourBasePath:u}),l.a.createElement(le,{isRotating:y,setIsRoating:O}))),l.a.createElement(ye,{baseName:a.get("name"),handleData:g,data:p,markerData:s,onCampus:r}),l.a.createElement("div",{id:"fixed-footer"},l.a.createElement(Q,{name:h,source:u+v})),l.a.createElement("div",{className:"overlay-ctn-show"},l.a.createElement(x.a,{className:"overlay-icon",icon:N.e,onClick:function(){return O(!0)}})),l.a.createElement("div",{className:"overlay-ctn-map"},l.a.createElement(x.a,{className:"overlay-icon",icon:N.f,onClick:function(){return t.replace("/map")}}))))},je=a(48),we=a(44);a(177),a(178);function ke(e){var t=e.URL,a=e.description,n=e.index,o=e.tourBasePath;return l.a.createElement(we.e,{index:n},l.a.createElement("p",null,a),l.a.createElement("img",{src:o+t,alt:a}))}function Se(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:e.URL,alt:e.description},e.description))}C.b.add(N.c,N.d);var Ce=function(e){var t=new URLSearchParams(Object(d.g)().search),a=t.get("name"),n=t.get("type"),o=Object(i.useState)([]),r=Object(c.a)(o,2),s=r[0],u=r[1],m=Object(i.useContext)(Je),f=m.markerData,p=m.tourBasePath;return Object(i.useEffect)((function(){return document.body.classList.add("no-image"),function(){document.body.classList.remove("no-image")}})),Object(i.useEffect)((function(){var e=(f.filter((function(e){return e.name===a})).pop()||{media_pages:[]}).media_pages;JSON.stringify(e)!==JSON.stringify(s)&&u(e)}),[s,f,a]),l.a.createElement("main",null,l.a.createElement("h1",{className:"header"},"Library"),l.a.createElement(je.a,null,s.map((function(e){return null===n||n===e.title?l.a.createElement(je.b,{allowZeroExpanded:!0},l.a.createElement("div",{className:"text"},l.a.createElement(je.d,null,l.a.createElement(je.c,{id:"title"},e.title)),l.a.createElement(je.e,null,"Pictures"===e.title?l.a.createElement(we.c,{naturalSlideWidth:100,naturalSlideHeight:100,infinite:!0,totalSlides:e.content_items.length},l.a.createElement(we.f,null,e.content_items.map((function(e,t){return l.a.createElement(ke,{URL:e.item,description:e.item_description,index:t,tourBasePath:p})}))),l.a.createElement(we.d,null),l.a.createElement(we.a,null,l.a.createElement(x.a,{className:"back-icon",icon:N.c})),l.a.createElement(we.b,null,l.a.createElement(x.a,{className:"next-icon",icon:N.d}))):e.content_items.map((function(e){return l.a.createElement(Se,{URL:e.item,description:e.item_description})}))))):null}))),l.a.createElement(_,{history:e.history}))};a(179);C.b.add(N.g);var xe=function(e){var t=e.history,a=new URLSearchParams(Object(d.g)().search),n=a.get("name"),o=a.get("type"),r=Object(i.useState)([]),s=Object(c.a)(r,2),u=s[0],m=s[1],f=Object(i.useState)(0),p=Object(c.a)(f,2),g=p[0],h=p[1],v=Object(i.useState)(!1),b=Object(c.a)(v,2),E=b[0],y=b[1],O=Object(i.useContext)(Je),j=O.markerData,w=O.tourBasePath,k=Object(ae.useAnimation)(),S=function(e){k.start({opacity:0,transition:{duration:e/1e3}}).then((function(){return y(!0)}))},C=function(){S(1.3*g)},P=function(){k.stop()};return Object(i.useEffect)((function(){return document.body.classList.add("scrollable-body"),function(){document.body.attributes.removeNamedItem("style"),document.body.classList.remove("scrollable-body")}}),[]),Object(i.useEffect)((function(){var e=(j.filter((function(e){return e.name===n})).pop()||{main_pages:[]}).main_pages;JSON.stringify(e)!==JSON.stringify(u)&&m(e)}),[u,j,n]),l.a.createElement(l.a.Fragment,null,u.map((function(e,a){return o===e.title?(document.body.style.backgroundImage="url("+w+e.background_image+")",l.a.createElement("main",{key:a},l.a.createElement(x.a,{className:["overlay-icon","closeBtn",E?"hidden":"visible"].join(" "),icon:N.g,onClick:function(){S(200)}}),l.a.createElement(ae.Frame,{position:"relative",animate:k,className:["textCtn",E?"hidden":"visible"].join(" "),initial:{opacity:1,width:"calc(100% - 16em)"},exit:{opacity:0}},l.a.createElement("h1",{id:"title"},e.title),l.a.createElement("p",{id:"text"},e.description)),l.a.createElement(Q,{source:w+e.descriptive_audio,onLoad:function(e){return h(e)},onPause:P,onPlaying:C}),l.a.createElement(_,{history:t}))):null})))};a(180);C.b.add(N.a,N.f,N.e);var Ne=[{description:"Turn the volume up on your device.",image:"Step1.png"},{description:"Use the map to navigate to each hotspot. If the map does not come up automatically, you can get there by clicking the [icon] icon.",icon:l.a.createElement(x.a,{color:"white",icon:N.f}),image:"Step2.png"},{description:"After arriving at the hotspot locate the foot-guide on the ground and point your camera in the direction indicated.",image:"Step3.png"},{description:"After pointing your camera in  the instructed direction, click on the [icon] icon to generate augmented images on the screen, and listen for the audio clip.",icon:l.a.createElement(x.a,{color:"white",icon:N.e}),image:"Step4.png"},{description:"After each hotspot you can find more information unique to that location by clicking on the [icon] icon and viewing each menu item.",icon:l.a.createElement(x.a,{color:"white",icon:N.a}),image:"Step5.png"}],Pe=[Ne[0],{description:"Click on each hotspot [icon] on the map to access augmented reality images and information about the site.",icon:l.a.createElement(x.a,{color:"white",icon:N.f}),image:"Step2-remote.png"},{description:"Each hotspot shows an historical image, displayed on a 360 image from today. You can use your mouse to look around the picture. Use the various icons to access additional information or to return to the map.",image:"Step3-remote.png"}],_e=function(e){var t=e.description,a=e.icon,n=e.index,o=/(\[icon\])/g,r=t.match(o);return l.a.createElement("li",{key:n},t.split(o).reduce((function(e,t){return a?r.includes(t)?[l.a.createElement(l.a.Fragment,null,e,a)]:[].concat(Object(I.a)(e),[t]):e})))},Ie=function(){return(Object(i.useContext)(Je).onCampus?Ne:Pe).map((function(e,t){return l.a.createElement(_e,Object.assign({},e,{index:t,key:t}))}))},Me=function(){var e=Object(d.f)(),t=Object(i.useState)(0),a=Object(c.a)(t,2),n=a[0],o=a[1],r=parseInt(localStorage.getItem("introCount")),s=Object(i.useContext)(Je),u=s.onCampus,f=s.setOnCampus,p=Object(i.useState)([]),g=Object(c.a)(p,2),h=g[0],v=g[1],b=u?"_inSitu":"_remote",E=Object(m.useHowl)({src:"./audio/intro/"+(n+1)+b+".m4a",html5:!0}).howl,y=Object(i.useCallback)((function(){localStorage.setItem("introCount",h.length),e.replace("/map")}),[h.length,e]),O=Object(i.useCallback)((function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"}}}).catch((function(e){f(!1)})):f(!1)}),[f]),j=Object(i.useCallback)((function(){navigator.geolocation?navigator.geolocation.watchPosition((function(){return f(!0)}),(function(){return f(!1)}),{enableHighAccuracy:!0,timeout:1/0,maximumAge:0}):f(!1)}),[f]);return Object(i.useEffect)((function(){return document.body.classList.add("IntroPage"),document.body.style.setProperty("--intro-background","url(./../../images/intro/Background_Tile.png)"),j(),O(),v(u?Ne:Pe),r>0&&h.length>0&&(r>=h.length?y():o(r)),function(){return document.body.classList.remove("IntroPage")}}),[h,u,r,O,j,y]),h.length>0&&h.length>n?l.a.createElement("div",{className:"intro"},l.a.createElement(m.Play,{howl:E}),l.a.createElement("h1",{className:"title"},"Step ",n+1),h.length-1>n&&l.a.createElement("p",{className:"skipBtn",onClick:y},"skip"),l.a.createElement("div",{className:"content"},l.a.createElement("img",{className:"icons",alt:"icon",src:"./images/intro/"+h[n].image}),l.a.createElement("p",{className:"description"},function(e){var t=/(\[icon\])/g,a=e.split(t),o=e.match(t);return a.reduce((function(e,t){return t?o.includes(t)?[].concat(Object(I.a)(e),[h[n].icon]):[].concat(Object(I.a)(e),[t]):e}))}(h[n].description))),l.a.createElement("button",{onClick:function(){if(n>0){var t=n-1;o(t),localStorage.setItem("introCount",t)}else e.push("/")},className:"btn-back"},"Back"),l.a.createElement("button",{onClick:function(){var e=n+1;h.length-1>n?(o(e),localStorage.setItem("introCount",e)):y()},className:"btn-next"},h.length-1>n?"Next":"Begin Tour")):l.a.createElement(l.a.Fragment,null,"Loading...")};var Be=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"404 Not found"),l.a.createElement(te.b,{to:"/"},l.a.createElement("p",null,"Please considering going back to the homepage.")))};a(181);C.b.add(N.g);var Le=function(e){var t=e.history,a=Object(i.useContext)(Je);return a.onCampus,a.setOnCampus,Object(i.useEffect)((function(){return document.body.classList.add("help-body"),function(){document.body.classList.remove("help-body")}}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"title"},"Help"),l.a.createElement("h2",{className:"subtitle"},"How to Use the Augmented Reality Tour"),l.a.createElement("ol",{className:"rules",type:"1"},l.a.createElement(Ie,null)),!1,l.a.createElement(x.a,{className:["overlay-icon","closeBtn"].join(" "),icon:N.g,onClick:function(){return t.goBack()}}))},Re=a(65),De=(JSON.parse(localStorage.getItem("markerData"))||{ga_tracking_id:""}).ga_tracking_id;De&&Re.a.initialize(De);var Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{debug:!0},a=function(e){Re.a.set(Object(M.a)({page:e},t)),Re.a.pageview(e)},n=function(t){return Object(i.useEffect)((function(){return a(t.location.pathname)}),[t.location.pathname]),l.a.createElement(e,t)};return n};var Te=function(){return l.a.createElement("main",null,l.a.createElement(d.c,null,l.a.createElement(d.a,{path:"/",component:Ue(h),exact:!0}),l.a.createElement(d.a,{path:"/map",component:Ue(Y),exact:!0}),l.a.createElement(d.a,{path:"/tour",component:Ue(Oe),exact:!0}),l.a.createElement(d.a,{path:"/media",component:Ue(Ce),exact:!0}),l.a.createElement(d.a,{path:"/main",component:Ue(xe),exact:!0}),l.a.createElement(d.a,{path:"/help",component:Ue(Le),exact:!0}),l.a.createElement(d.a,{path:"/intro",component:Ue(Me),exact:!0}),l.a.createElement(d.a,{component:Be})))},Ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(182);var He=a(195);a.d(t,"Context",(function(){return Je}));var Je=l.a.createContext();function ze(e){var t=e.children,a=Object(i.useState)(!1),n=Object(c.a)(a,2),s=n[0],u=n[1],m=Object(i.useState)(!1),f=Object(c.a)(m,2),p=f[0],g=f[1],h=Object(d.g)(),v=Object(i.useState)(null),b=Object(c.a)(v,2),E=b[0],y=b[1],O=Object(i.useState)([]),j=Object(c.a)(O,2),w=j[0],k=j[1],S=(JSON.parse(localStorage.getItem("markerData"))||{project_name:""}).project_name;Object(He.a)(S);var C=Object(i.useCallback)(function(){var e=Object(r.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=/^[a-zA-Z0-9]+$/,""!==(a=null===t?"":t)&&!n.test(a)){e.next=7;break}return e.next=5,fetch("."+a+"/markers.json").then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("hotspots")&&(JSON.stringify(t)!==JSON.stringify(localStorage.getItem("tourBasePath"))&&localStorage.setItem("tourBasePath",JSON.stringify(t)),JSON.stringify(e.hotspots)!==JSON.stringify(w)&&k(e.hotspots),localStorage.getItem("markerData")!==JSON.stringify(e)&&(localStorage.setItem("markerData",JSON.stringify(e)),window.location.reload()))})).catch((function(e){return console.error("[Error]: "+e)}));case 5:e.next=8;break;case 7:console.error("[Error]: Path traveral attempted, could not get marker data");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[w]);return Object(i.useEffect)((function(){var e=new URLSearchParams(h.search).get("tour");if(E!==e&&"/"===h.pathname&&y(e),"/"===h.pathname)C(e);else if(0===w.length&&null!==localStorage.getItem("markerData")){var t=JSON.parse(localStorage.getItem("tourBasePath"));y(t),C(t)}}),[h,E,w,C]),l.a.createElement(Je.Provider,{value:{onCampus:s,setOnCampus:function(e){e!==s&&u(e)},modelOpen:p,toggleModel:function(e){return g(e)},markerData:w,tourBasePath:null===E?"":E+"/"}},t,l.a.createElement(B.a,null))}u.a.render(l.a.createElement(te.a,{basename:window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/"))},l.a.createElement(ze,null,l.a.createElement(Te,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");Ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Fe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Fe(t,e)}))}}()},97:function(e,t,a){e.exports=a(183)}},[[97,1,2]]]);
//# sourceMappingURL=main.d18f711b.chunk.js.map